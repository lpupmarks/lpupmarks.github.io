<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ukulele Note Detector</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        #note {
            font-size: 24px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Ukulele Note Detector</h1>
    <p id="note">Playing: </p>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const noteElement = document.getElementById('note');

            // Set up audio context
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const analyser = audioContext.createAnalyser();
            const scriptProcessor = audioContext.createScriptProcessor(2048, 1, 1);

            function setupMicrophone() {
                navigator.mediaDevices.getUserMedia({ audio: true })
                    .then(stream => {
                        const source = audioContext.createMediaStreamSource(stream);
                        source.connect(analyser);
                        analyser.connect(scriptProcessor);
                        scriptProcessor.connect(audioContext.destination);

                        scriptProcessor.onaudioprocess = (e) => {
                            const buffer = e.inputBuffer.getChannelData(0);
                            const frequency = getFrequency(buffer);
                            const note = frequencyToNote(frequency);

                            if (note) {
                                noteElement.textContent = `Playing: ${note} (${frequency.toFixed(2)} Hz)`;
                            } else {
                                noteElement.textContent = 'Playing: No note detected';
                            }

                            console.log(`Frequency: ${frequency.toFixed(2)} Hz, Note: ${note}`);
                        };
                    })
                    .catch(err => console.error('Error accessing microphone:', err));
            }

            function getFrequency(buffer) {
                // Implement a simple frequency detection algorithm here
                // For demonstration, this is a placeholder that returns a fixed frequency
                return Math.random() * 1000 + 100; // Replace with actual frequency detection
            }

            function frequencyToNote(frequency) {
                const A4 = 440;
                const notes = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];
                if (frequency === 0) return null;
                const noteNumber = Math.round(12 * Math.log2(frequency / A4)) + 49;
                return notes[(noteNumber % 12 + 12) % 12];
            }

            setupMicrophone();
        });
    </script>
</body>
</html>
